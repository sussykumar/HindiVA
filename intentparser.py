import os
import re
from rapidfuzz import process, fuzz

# ==========================================
# LOCAL AI ENGINE INITIALIZATION (SARVAM-1)
# ==========================================
try:
    from llama_cpp import Llama
    BASE_DIR = os.path.dirname(os.path.abspath(__file__))
    MODEL_PATH = os.path.join(BASE_DIR, "llm_model", "sarvam.gguf")
    print("ðŸš€ [BRAIN] Booting Sarvam-1 Neural Engine...")
    # n_ctx=512 limits RAM usage so the Raspberry Pi 4 doesn't crash
    llm = Llama(model_path=MODEL_PATH, n_ctx=512, n_threads=4, verbose=False)
    print("âœ… [BRAIN] Sarvam-1 Loaded Successfully!\n")
except Exception as e:
    print(f"âš ï¸ [BRAIN WARNING]: Could not load Sarvam AI ({e}). Running in Regex-only mode.\n")
    llm = None

# ==========================================
# TIER 0: THE TITANIUM DEVANAGARI TAXONOMY
# ==========================================
COMMAND_REGISTRY = {
    # --- Home Automation ---
    "LIGHT_ON": [
        "à¤¬à¤¤à¥à¤¤à¥€ à¤œà¤²à¤¾à¤“", "à¤²à¤¾à¤‡à¤Ÿ à¤‘à¤¨ à¤•à¤°à¥‹", "à¤¬à¤¤à¥à¤¤à¥€ à¤šà¤¾à¤²à¥‚ à¤•à¤°à¥‹", "à¤°à¥‹à¤¶à¤¨à¥€ à¤•à¤°à¥‹", 
        "à¤²à¤¾à¤‡à¤Ÿ à¤šà¤¾à¤²à¥‚ à¤•à¤°à¥‹", "à¤Ÿà¥à¤¯à¥‚à¤¬à¤²à¤¾à¤‡à¤Ÿ à¤œà¤²à¤¾ à¤¦à¥‹", "à¤²à¤¾à¤‡à¤Ÿ à¤œà¤²à¤¾ à¤¦à¥‹", "à¤¬à¤¤à¥à¤¤à¥€ à¤‘à¤¨ à¤•à¤° à¤¦à¥‹",
        "à¤²à¤¾à¤‡à¤Ÿ à¤–à¥‹à¤² à¤¦à¥‹", "à¤¬à¤¤à¥à¤¤à¥€ à¤–à¥‹à¤² à¤¦à¥‹", "à¤¬à¤²à¥à¤¬ à¤œà¤²à¤¾à¤“", "à¤°à¥‹à¤¶à¤¨à¥€ à¤•à¤° à¤¦à¥‹", "à¤²à¤¾à¤‡à¤Ÿà¥à¤¸ à¤‘à¤¨",
        "à¤²à¤¾à¤‡à¤Ÿ à¤‘à¤¨ à¤•à¤°", "à¤¬à¤¤à¥à¤¤à¥€ à¤œà¤²à¤¾ à¤¦à¥‡", "à¤¬à¤²à¥à¤¬ à¤‘à¤¨ à¤•à¤°", "à¤²à¤¾à¤‡à¤Ÿ à¤œà¤²à¤¾à¤¨à¤¾", "à¤…à¤‚à¤§à¥‡à¤°à¤¾ à¤¦à¥‚à¤° à¤•à¤°à¥‹"
    ],
    "LIGHT_OFF": [
        "à¤¬à¤¤à¥à¤¤à¥€ à¤¬à¥à¤à¤¾à¤“", "à¤²à¤¾à¤‡à¤Ÿ à¤‘à¤« à¤•à¤°à¥‹", "à¤¬à¤¤à¥à¤¤à¥€ à¤¬à¤‚à¤¦ à¤•à¤°à¥‹", "à¤…à¤‚à¤§à¥‡à¤°à¤¾ à¤•à¤°à¥‹", 
        "à¤²à¤¾à¤‡à¤Ÿ à¤¬à¤‚à¤¦ à¤•à¤° à¤¦à¥‹", "à¤¸à¤¬ à¤¬à¤‚à¤¦ à¤•à¤°à¥‹", "à¤¬à¤¤à¥à¤¤à¥€ à¤‘à¤« à¤•à¤° à¤¦à¥‹", "à¤²à¤¾à¤‡à¤Ÿ à¤¬à¥à¤à¤¾ à¤¦à¥‹",
        "à¤¬à¤²à¥à¤¬ à¤¬à¤‚à¤¦ à¤•à¤°à¥‹", "à¤¬à¤¤à¥à¤¤à¤¿à¤¯à¤¾à¤‚ à¤¬à¥à¤à¤¾ à¤¦à¥‹", "à¤²à¤¾à¤‡à¤Ÿà¥à¤¸ à¤‘à¤«", "à¤²à¤¾à¤‡à¤Ÿ à¤‘à¤« à¤•à¤° à¤¦à¥‡",
        "à¤¬à¤¤à¥à¤¤à¥€ à¤¬à¥à¤à¤¾ à¤¦à¥‡", "à¤²à¤¾à¤‡à¤Ÿ à¤¬à¤‚à¤¦ à¤•à¤°", "à¤¬à¤¤à¥à¤¤à¥€ à¤‘à¤« à¤•à¤°à¤¨à¤¾", "à¤¬à¤²à¥à¤¬ à¤¬à¥à¤à¤¾à¤“"
    ],
    "FAN_ON": [
        "à¤ªà¤‚à¤–à¤¾ à¤šà¤²à¤¾à¤“", "à¤«à¥ˆà¤¨ à¤‘à¤¨ à¤•à¤°à¥‹", "à¤ªà¤‚à¤–à¤¾ à¤šà¤¾à¤²à¥‚ à¤•à¤°à¥‹", "à¤«à¥ˆà¤¨ à¤šà¤²à¤¾ à¤¦à¥‹", 
        "à¤ªà¤‚à¤–à¤¾ à¤‘à¤¨ à¤•à¤° do", "à¤ªà¤‚à¤–à¤¾ à¤–à¥‹à¤² à¤¦à¥‹", "à¤«à¥ˆà¤¨ à¤šà¤¾à¤²à¥‚ à¤•à¤° à¤¦à¥‹", "à¤¹à¤µà¤¾ à¤šà¤²à¤¾à¤“",
        "à¤ªà¤‚à¤–à¤¾ à¤šà¤²à¤¾ à¤¦à¥‡", "à¤«à¥ˆà¤¨ à¤‘à¤¨ à¤•à¤° à¤¦à¥‡", "à¤ªà¤‚à¤–à¤¾ à¤‘à¤¨ à¤•à¤°", "à¤«à¥ˆà¤¨ à¤šà¤²à¤¾à¤¨à¤¾"
    ],
    "FAN_OFF": [
        "à¤ªà¤‚à¤–à¤¾ à¤¬à¤‚à¤¦ à¤•à¤°à¥‹", "à¤«à¥ˆà¤¨ à¤‘à¤« à¤•à¤°à¥‹", "à¤ªà¤‚à¤–à¤¾ à¤°à¥‹à¤• à¤¦à¥‹", "à¤«à¥ˆà¤¨ à¤¬à¤‚à¤¦ à¤•à¤° à¤¦à¥‹", 
        "à¤ªà¤‚à¤–à¤¾ à¤‘à¤« à¤•à¤° à¤¦à¥‹", "à¤ªà¤‚à¤–à¤¾ à¤¬à¥à¤à¤¾ à¤¦à¥‹", "à¤ªà¤‚à¤–à¤¾ à¤¬à¤‚à¤¦ à¤•à¤° à¤¦à¥‡", "à¤«à¥ˆà¤¨ à¤‘à¤« à¤•à¤°",
        "à¤ªà¤‚à¤–à¤¾ à¤°à¥‹à¤• à¤¦à¥‡", "à¤«à¥ˆà¤¨ à¤¬à¤‚à¤¦ à¤•à¤°à¤¨à¤¾"
    ],
    "AC_ON": [
        "à¤à¤¸à¥€ à¤‘à¤¨ à¤•à¤°à¥‹", "à¤à¤¸à¥€ à¤šà¤²à¤¾ à¤¦à¥‹", "à¤à¤¸à¥€ à¤šà¤¾à¤²à¥‚ à¤•à¤°à¥‹", "à¤µà¤¾à¤¤à¤¾à¤¨à¥à¤•à¥‚à¤²à¤• à¤šà¤²à¤¾à¤“", 
        "à¤à¤¸à¥€ à¤‘à¤¨ à¤•à¤° à¤¦à¥‹", "à¤•à¥‚à¤²à¤¿à¤‚à¤— à¤•à¤°à¥‹", "à¤à¤¸à¥€ à¤šà¤²à¤¾ à¤¦à¥‡", "à¤à¤¸à¥€ à¤‘à¤¨ à¤•à¤°"
    ],
    
    # --- Time, Date & Weather ---
    "TIME_ASK": [
        "à¤¸à¤®à¤¯ à¤•à¥à¤¯à¤¾ à¤¹à¥ˆ", "à¤Ÿà¤¾à¤‡à¤® à¤¬à¤¤à¤¾à¤“", "à¤•à¤¿à¤¤à¤¨à¥‡ à¤¬à¤œà¥‡ à¤¹à¥ˆà¤‚", "à¤Ÿà¤¾à¤‡à¤® à¤•à¥à¤¯à¤¾ à¤¹à¥à¤†", 
        "à¤˜à¤¡à¤¼à¥€ à¤®à¥‡à¤‚ à¤•à¥à¤¯à¤¾ à¤Ÿà¤¾à¤‡à¤® à¤¹à¥ˆ", "à¤…à¤­à¥€ à¤•à¥à¤¯à¤¾ à¤¬à¤œà¤¾ à¤¹à¥ˆ", "à¤•à¥à¤¯à¤¾ à¤¸à¤®à¤¯ à¤¹à¥‹ à¤°à¤¹à¤¾ à¤¹à¥ˆ", 
        "à¤…à¤­à¥€ à¤Ÿà¤¾à¤‡à¤® à¤•à¥à¤¯à¤¾ à¤¹à¥‹ à¤°à¤¹à¤¾ à¤¹à¥ˆ", "à¤µà¤•à¥à¤¤ à¤•à¥à¤¯à¤¾ à¤¹à¥ˆ", "à¤•à¤¿à¤¤à¤¨à¤¾ à¤¬à¤œà¤¾ à¤¹à¥ˆ", "à¤Ÿà¤¾à¤‡à¤® à¤•à¥à¤¯à¤¾ à¤¹à¥ˆ"
    ],
    "DATE_ASK": [
        "à¤†à¤œ à¤•à¥à¤¯à¤¾ à¤¤à¤¾à¤°à¥€à¤– à¤¹à¥ˆ", "à¤†à¤œ à¤•à¥€ à¤¡à¥‡à¤Ÿ à¤•à¥à¤¯à¤¾ à¤¹à¥ˆ", "à¤†à¤œ à¤•à¥Œà¤¨ à¤¸à¥€ à¤¤à¤¾à¤°à¥€à¤– à¤¹à¥ˆ",
        "à¤†à¤œ à¤•à¤¿à¤¤à¤¨à¥€ à¤¤à¤¾à¤°à¥€à¤– à¤¹à¥ˆ", "à¤†à¤œ à¤•à¤¾ à¤¦à¤¿à¤¨à¤¾à¤‚à¤• à¤•à¥à¤¯à¤¾ à¤¹à¥ˆ", "à¤¤à¤¾à¤°à¥€à¤– à¤¬à¤¤à¤¾à¤“", "à¤¡à¥‡à¤Ÿ à¤•à¥à¤¯à¤¾ à¤¹à¥ˆ"
    ],
    "DAY_ASK": [
        "à¤†à¤œ à¤•à¥Œà¤¨ à¤¸à¤¾ à¤¦à¤¿à¤¨ à¤¹à¥ˆ", "à¤†à¤œ à¤•à¥Œà¤¨ à¤¸à¤¾ à¤¡à¥‡ à¤¹à¥ˆ", "à¤†à¤œ à¤•à¥à¤¯à¤¾ à¤¦à¤¿à¤¨ à¤¹à¥ˆ", 
        "à¤†à¤œ à¤•à¥Œà¤¨ à¤µà¤¾à¤° à¤¹à¥ˆ", "à¤¦à¤¿à¤¨ à¤¬à¤¤à¤¾à¤“"
    ],
    "WEATHER_ASK": [
        "à¤®à¥Œà¤¸à¤® à¤•à¥ˆà¤¸à¤¾ à¤¹à¥ˆ", "à¤†à¤œ à¤•à¤¾ à¤®à¥Œà¤¸à¤® à¤•à¥ˆà¤¸à¤¾ à¤¹à¥ˆ", "à¤†à¤œ à¤µà¥‡à¤¦à¤° à¤•à¥ˆà¤¸à¤¾ à¤¹à¥ˆ", 
        "à¤®à¥Œà¤¸à¤® à¤•à¤¾ à¤¹à¤¾à¤² à¤¬à¤¤à¤¾à¤“", "à¤¬à¤¾à¤¹à¤° à¤•à¤¾ à¤®à¥Œà¤¸à¤® à¤•à¥ˆà¤¸à¤¾ à¤¹à¥ˆ", "à¤•à¥à¤¯à¤¾ à¤†à¤œ à¤®à¥Œà¤¸à¤® à¤¸à¤¾à¤« à¤¹à¥ˆ",
        "à¤µà¥‡à¤¦à¤° à¤¬à¤¤à¤¾à¤“", "à¤¬à¤¾à¤¹à¤° à¤•à¥ˆà¤¸à¤¾ à¤®à¥Œà¤¸à¤® à¤¹à¥ˆ"
    ],
    "TEMP_ASK": [
        "à¤¤à¤¾à¤ªà¤®à¤¾à¤¨ à¤¬à¤¤à¤¾à¤“", "à¤¬à¤¾à¤¹à¤° à¤¤à¤¾à¤ªà¤®à¤¾à¤¨ à¤•à¥à¤¯à¤¾ à¤¹à¥ˆ", "à¤°à¥‚à¤® à¤Ÿà¥‡à¤‚à¤ªà¤°à¥‡à¤šà¤° à¤•à¥à¤¯à¤¾ à¤¹à¥ˆ", 
        "à¤†à¤œ à¤•à¤¿à¤¤à¤¨à¥€ à¤—à¤°à¥à¤®à¥€ à¤¹à¥ˆ", "à¤Ÿà¥‡à¤‚à¤ªà¤°à¥‡à¤šà¤° à¤¬à¤¤à¤¾à¤“", "à¤•à¤¿à¤¤à¤¨à¤¾ à¤¤à¤¾à¤ªà¤®à¤¾à¤¨ à¤¹à¥ˆ"
    ],
    "RAIN_ASK": [
        "à¤†à¤œ à¤•à¥€ à¤¬à¤¾à¤°à¤¿à¤¶", "à¤•à¥à¤¯à¤¾ à¤†à¤œ à¤¬à¤¾à¤°à¤¿à¤¶ à¤¹à¥‹à¤—à¥€", "à¤°à¥‡à¤¨ à¤•à¥‡ à¤šà¤¾à¤‚à¤¸à¥‡à¤¸ à¤¹à¥ˆà¤‚ à¤•à¥à¤¯à¤¾", 
        "à¤•à¥à¤¯à¤¾ à¤¬à¤¾à¤°à¤¿à¤¶ à¤¹à¥‹à¤¨à¥‡ à¤µà¤¾à¤²à¥€ à¤¹à¥ˆ", "à¤¬à¤¾à¤°à¤¿à¤¶ à¤¹à¥‹à¤—à¥€ à¤•à¥à¤¯à¤¾", "à¤ªà¤¾à¤¨à¥€ à¤¬à¤°à¤¸à¥‡à¤—à¤¾ à¤•à¥à¤¯à¤¾"
    ],

    # --- Reminders, Alarms & Media ---
    "ALARM_SET": [
        "à¤…à¤²à¤¾à¤°à¥à¤® à¤²à¤—à¤¾à¤“", "à¤…à¤²à¤¾à¤°à¥à¤® à¤¸à¥‡à¤Ÿ à¤•à¤°à¥‹", "à¤®à¥à¤à¥‡ à¤œà¤—à¤¾ à¤¦à¥‡à¤¨à¤¾", "à¤…à¤²à¤¾à¤°à¥à¤® à¤²à¤—à¤¾ à¤¦à¥‹", 
        "à¤¸à¥à¤¬à¤¹ à¤‰à¤ à¤¾ à¤¦à¥‡à¤¨à¤¾", "à¤µà¥‡à¤• à¤…à¤ª à¤…à¤²à¤¾à¤°à¥à¤®", "à¤…à¤²à¤¾à¤°à¥à¤® à¤šà¤¾à¤²à¥‚ à¤•à¤°à¥‹", "à¤…à¤²à¤¾à¤°à¥à¤® à¤²à¤—à¤¾ à¤¦à¥‡",
        "à¤…à¤²à¤¾à¤°à¥à¤® à¤¸à¥‡à¤Ÿ à¤•à¤° à¤¦à¥‡"
    ],
    "REMINDER_SET": [
        "à¤¯à¤¾à¤¦ à¤¦à¤¿à¤²à¤¾à¤¨à¤¾", "à¤°à¤¿à¤®à¤¾à¤‡à¤‚à¤¡à¤° à¤¸à¥‡à¤Ÿ à¤•à¤°à¥‹", "à¤®à¥à¤à¥‡ à¤¯à¤¾à¤¦ à¤¦à¤¿à¤²à¤¾à¤“", "à¤°à¤¿à¤®à¤¾à¤‡à¤‚à¤¡à¤° à¤²à¤—à¤¾à¤“", 
        "à¤°à¤¿à¤®à¤¾à¤‡à¤‚à¤¡ à¤®à¥€", "à¤°à¤¿à¤®à¤¾à¤‡à¤‚à¤¡à¤° à¤¸à¥‡à¤Ÿ à¤•à¤° à¤¦à¥‹", "à¤•à¤² à¤®à¥€à¤Ÿà¤¿à¤‚à¤— à¤¯à¤¾à¤¦ à¤¦à¤¿à¤²à¤¾à¤¨à¤¾", 
        "à¤ªà¤°à¤¸à¥‹à¤‚ à¤µà¥ˆà¤•à¥à¤¸à¥€à¤¨à¥‡à¤¶à¤¨ à¤•à¤¾ à¤°à¤¿à¤®à¤¾à¤‡à¤‚à¤¡à¤°", "à¤¬à¤°à¥à¤¥à¤¡à¥‡ à¤¯à¤¾à¤¦ à¤¦à¤¿à¤²à¤¾à¤¨à¤¾", "à¤¦à¤µà¤¾à¤ˆ à¤•à¤¾ à¤°à¤¿à¤®à¤¾à¤‡à¤‚à¤¡à¤°"
    ],
    "ALARM_STOP": [
        "à¤…à¤²à¤¾à¤°à¥à¤® à¤¬à¤‚à¤¦ à¤•à¤°à¥‹", "à¤…à¤²à¤¾à¤°à¥à¤® à¤°à¥‹à¤• à¤¦à¥‹", "à¤¸à¥à¤Ÿà¥‰à¤ª à¤‡à¤Ÿ", "à¤…à¤²à¤¾à¤°à¥à¤® à¤‘à¤« à¤•à¤°à¥‹", 
        "à¤šà¥à¤ª à¤¹à¥‹ à¤œà¤¾à¤“", "à¤…à¤²à¤¾à¤°à¥à¤® à¤¬à¤‚à¤¦ à¤•à¤° à¤¦à¥‡", "à¤…à¤²à¤¾à¤°à¥à¤® à¤‘à¤« à¤•à¤°"
    ],
    "VOLUME_UP": [
        "à¤†à¤µà¤¾à¤œà¤¼ à¤¬à¤¢à¤¼à¤¾à¤“", "à¤µà¥‰à¤²à¥à¤¯à¥‚à¤® à¤¤à¥‡à¤œ à¤•à¤°à¥‹", "à¤†à¤µà¤¾à¤œà¤¼ à¤¤à¥‡à¤œ à¤•à¤°à¥‹", "à¤µà¥‰à¤²à¥à¤¯à¥‚à¤® à¤…à¤ª", 
        "à¤œà¥‹à¤° à¤¸à¥‡ à¤¬à¥‹à¤²à¥‹", "à¤†à¤µà¤¾à¤œà¤¼ à¤œà¥à¤¯à¤¾à¤¦à¤¾ à¤•à¤°à¥‹", "à¤¸à¤¾à¤‰à¤‚à¤¡ à¤¬à¤¢à¤¼à¤¾à¤“", "à¤µà¥‰à¤²à¥à¤¯à¥‚à¤® à¤«à¥à¤² à¤•à¤°à¥‹"
    ],
    "VOLUME_DOWN": [
        "à¤†à¤µà¤¾à¤œà¤¼ à¤•à¤® à¤•à¤°à¥‹", "à¤µà¥‰à¤²à¥à¤¯à¥‚à¤® à¤•à¤® à¤•à¤°à¥‹", "à¤§à¥€à¤®à¥‡ à¤¬à¥‹à¤²à¥‹", "à¤µà¥‰à¤²à¥à¤¯à¥‚à¤® à¤¡à¤¾à¤‰à¤¨", 
        "à¤†à¤µà¤¾à¤œà¤¼ à¤¹à¤²à¥à¤•à¥€ à¤•à¤°à¥‹", "à¤¸à¤¾à¤‰à¤‚à¤¡ à¤•à¤® à¤•à¤°à¥‹", "à¤†à¤µà¤¾à¤œà¤¼ à¤•à¤® à¤•à¤° à¤¦à¥‹"
    ]
}

# ==========================================
# UTILITY FUNCTIONS
# ==========================================
def normalize_text(text):
    text = re.sub(r'[^\w\s\u0900-\u097F]', '', text)
    return text.lower().strip()

def split_commands(text):
    parts = re.split(r'\s+(à¤”à¤°|à¤¤à¤¥à¤¾|à¤«à¤¿à¤°|and)\s+', text)
    commands = [p.strip() for p in parts if p.strip() not in ['à¤”à¤°', 'à¤¤à¤¥à¤¾', 'à¤«à¤¿à¤°', 'and'] and p.strip()]
    return commands

# ==========================================
# THE LLM FALLBACK PARSER
# ==========================================
def llm_intent_parser(phrase):
    """Forces Sarvam-1 to act strictly as a fallback intent classifier."""
    if not llm: return "UNKNOWN_COMMAND"
    print(f"   [SARVAM-1] Analyzing heavy slang: '{phrase}'...")
    
    # Join all valid commands dynamically so the AI knows its options
    valid_commands_str = ", ".join(COMMAND_REGISTRY.keys())
    
    prompt = f"""You are the central intelligence of an offline smart home system. 
Classify the following Hindi/Hinglish user phrase into EXACTLY ONE of these hardware commands: 
[{valid_commands_str}, UNKNOWN_COMMAND]

Phrase: {phrase}
Command:"""
    
    output = llm(prompt, max_tokens=15, stop=["\n", "Phrase:"], echo=False)
    result = output['choices'][0]['text'].strip().upper()
    
    for cmd in COMMAND_REGISTRY.keys():
        if cmd in result:
            print(f"   [SARVAM-1] Successfully mapped to -> {cmd}")
            return cmd
            
    return "UNKNOWN_COMMAND"

# ==========================================
# THE HYBRID ENGINE (FUZZY + AI)
# ==========================================
def parse_multiple_intents(text):
    normalized_text = normalize_text(text)
    command_phrases = split_commands(normalized_text)
    
    results = []
    
    for phrase in command_phrases:
        best_match = None
        highest_score = 0
        
        # 1. Try RapidFuzz First (Fast & Lightweight)
        for intent, phrases in COMMAND_REGISTRY.items():
            match = process.extractOne(phrase, phrases, scorer=fuzz.token_set_ratio)
            if match:
                score = match[1]
                if score > highest_score:
                    highest_score = score
                    best_match = intent
                    
        if highest_score >= 60:  
            results.append({"intent": best_match, "confidence": round(highest_score, 2), "phrase": phrase})
        else:
            # 2. Trigger AI Fallback (If RapidFuzz is confused)
            llm_intent = llm_intent_parser(phrase)
            if llm_intent != "UNKNOWN_COMMAND":
                results.append({"intent": llm_intent, "confidence": 99.9, "phrase": phrase})
            else:
                results.append({"intent": "UNKNOWN_COMMAND", "confidence": round(highest_score, 2), "phrase": phrase})
            
    return results

if __name__ == "__main__":
    test_query = "à¤¯à¤¹à¤¾à¤ à¤¸à¤¾à¤‚à¤¸ à¤˜à¥à¤Ÿ à¤°à¤¹à¥€ à¤¹à¥ˆ à¤•à¥à¤› à¤šà¤¾à¤²à¥‚ à¤•à¤° à¤”à¤° à¤•à¤² à¤•à¤¾ à¤…à¤²à¤¾à¤°à¥à¤® à¤²à¤—à¤¾à¤“"
    print(f"\nðŸ—£ï¸ Input: '{test_query}'")
    result = parse_multiple_intents(test_query)
    print("\nâœ… Extracted Intents:")
    for res in result:
        print(f" - Command: '{res['phrase']}' -> Intent: {res['intent']} (Confidence: {res['confidence']}%)")